<div class="container">
  <div class="year">
    <ng-container *ngIf="historyYears$ | async as years; else skeleton">
      <div class="year__item" *ngFor="let item of years" (click)="openYear(item.year.toString(), item.watchedNumber, item.favoritesNumber)">

        <div class="year__info">

          <div class="year__info-wrapper">
            <div class="year__info-year">
              {{item.year}}
            </div>

            <div class="year__info-count">
              <div class="year__info-icon-wrapper">
                <svg class="year__info-icon year__info-icon--play" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
                  <path fill="currentColor" d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z" />
                </svg>
              </div>
              <div>{{item.watchedNumber}}</div>
            </div>

            <div class="year__info-count">
              <div class="year__info-icon-wrapper">
                <svg class="year__info-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                  <path fill="currentColor" d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z" />
                </svg>
              </div>
              <div>{{item.favoritesNumber}}</div>
            </div>
          </div>

        </div>

        <div class="year__preview-wrapper">
          <div class="year__preview">
            <div class="year__cover" *ngFor="let show of item.data; let i = index">
              <img class="year__image" src="{{show.cover}}" (load)="loadImage($event)">
            </div>
          </div>
        </div>

      </div>
    </ng-container>
  </div>
</div>

<ng-template #skeleton>

  <div class="year__item year__item--loading" *ngFor="let item of skeletonYears">

  </div>

</ng-template>
