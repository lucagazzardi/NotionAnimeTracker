<div class="container" role="main">

  <!--!FILTERS-->
  <div class="filter-wrap">
    <div class="filter">

      <div class="filter__item searchbar">
        <div class="filter__name searchbar">
          Search
        </div>
        <div class="filter__field"><app-searchbar></app-searchbar></div>
      </div>

      <div class="filter__item">
        <div class="filter__name">
          Year
        </div>
        <div class="filter__field"><app-select [values]="selectYear" [background]="filterBackground"></app-select></div>
      </div>

      <div class="filter__item">
        <div class="filter__name">
          Status
        </div>
        <div class="filter__field"><app-select [values]="showStatuses" [background]="filterBackground"></app-select></div>
      </div>

      <div class="filter__item">
        <div class="filter__name">
          Format
        </div>
        <div class="filter__field"><app-select [values]="selectFormat" [background]="filterBackground"></app-select></div>
      </div>

    </div>

    <div class="extra-filter" (click)="switchShowSliders()" [class.extra-filter--active]="showSliders">
      <svg xmlns="http://www.w3.org/2000/svg" height="1rem" viewBox="0 0 512 512">
        <path fill="currentColor" d="M0 416c0 17.7 14.3 32 32 32l54.7 0c12.3 28.3 40.5 48 73.3 48s61-19.7 73.3-48L480 448c17.7 0 32-14.3 32-32s-14.3-32-32-32l-246.7 0c-12.3-28.3-40.5-48-73.3-48s-61 19.7-73.3 48L32 384c-17.7 0-32 14.3-32 32zm128 0a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zM320 256a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zm32-80c-32.8 0-61 19.7-73.3 48L32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l246.7 0c12.3 28.3 40.5 48 73.3 48s61-19.7 73.3-48l54.7 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-54.7 0c-12.3-28.3-40.5-48-73.3-48zM192 128a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm73.3-64C253 35.7 224.8 16 192 16s-61 19.7-73.3 48L32 64C14.3 64 0 78.3 0 96s14.3 32 32 32l86.7 0c12.3 28.3 40.5 48 73.3 48s61-19.7 73.3-48L480 128c17.7 0 32-14.3 32-32s-14.3-32-32-32L265.3 64z" />
      </svg>
    </div>

  </div>

  <!--!SLIDERS-->
  <div *ngIf="showSliders" class="sliders" @YMovement_Opacity>
    <div>
      <app-slider [label]="'MAL Score'"></app-slider>
    </div>

    <div>
      <app-slider [label]="'Personal Score'"></app-slider>
    </div>
  </div>

  <!--!SORT-->
  <app-sort></app-sort>

  <!--!SHOWS-->
  <ng-container *ngIf="!searching">

    <div class="show-visualization">
      <div class="show-visualization__container">

        <div class="show-visualization__shows">

          <ng-container *ngIf="libraryListStatic || (libraryList$ | async); else skeleton">
            <div *ngFor="let item of libraryListStatic; let i = index" class="show-visualization__item" (mouseenter)="libraryListTracker[i] = true" (mouseleave)="libraryListTracker[i] = false">

              <a class="show-visualization__cover" (click)="editItem(item)" @opacityOnEnter>
                <img class="show-visualization__image" src="{{item.main_picture.medium}}">

                <!--BUTTONS-->
                <ng-container *ngTemplateOutlet="buttons; context: { item: item, list: libraryListTracker, index: i }"></ng-container>

              </a>
              <a class="show-visualization__show-title" (click)="editItem(item)">
                {{item.alternative_titles.en ? item.alternative_titles.en : item.title}}
              </a>

            </div>
          </ng-container>

        </div>
      </div>
    </div>

  </ng-container>


</div>


<!--SKELETON TEMPLATE-->
<ng-template #skeleton>
  <div *ngFor="let item of loadingSkeleton" class="show-visualization__item">
    <div class="show-visualization__cover loading" @scaleUpOnEnter></div>
    <div class="show-visualization__show-title loading"></div>
  </div>
</ng-template>

<!--NO RESULTS TEMPLATE-->
<ng-template #noResultsCont>
  <div class="no-results" @opacityOnEnter>No Results</div>
</ng-template>

<!--BUTTONS TEMPLATE-->
<ng-template #buttons let-item="item" let-list="list" let-i="index">

  <div (mouseenter)="showImmersionButton = true" (mouseleave)="showImmersionButton = false">

    <div *ngIf="list[i]" class="show-buttons" @totalScale_OpacityOnEnter>

      <div class="show-buttons__item--main">

        <!--REMOVE BUTTON-->
        <div class="show-buttons__item">
          <div>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="show-buttons__icon--m">
              <path fill="currentColor" d="M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z" />
            </svg>
          </div>
        </div>

      </div>

      <!--ADD IMMERSION BUTTON-->
      <div *ngIf="showImmersionButton" class="show-buttons__item tooltip" label="Add immersion" @totalScaleUp_Opacity_MarginOnEnter>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="show-buttons__icon--xl">
            <path fill="currentColor" d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z" />
          </svg>
        </div>
      </div>

    </div>

  </div>
</ng-template>
